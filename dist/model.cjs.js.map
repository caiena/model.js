{"version":3,"file":"model.cjs.js","sources":["../src/meta.js","../src/mixin.js","../src/mixins/attributable.js","../src/mixins/relatable.js","../src/mixins/translatable.js","../src/validators/datetime.js","../src/validators/presence.js","../src/validators/register.js","../src/mixins/validatable.js","../src/model.js","../src/config/i18n/translations.js"],"sourcesContent":["// utility function for metaprogramming\n\nimport _ from '@caiena/lodash-ext'\n\n\nfunction defineInternalProp(obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    enumerable: false,\n    writable: true,\n    configurable: true,\n    value\n  })\n}\n\n\n// checks for property in instance or its prototype\nfunction writableProp(instance, name) {\n  // avoiding reserved props (e.g. constructor) or names starting with $ - model.js \"meta\" props\n  if (_.includes(['constructor'], name) || _.startsWith(name, '$')) return false\n\n  let descriptor = null\n\n  if (instance.hasOwnProperty(name)) {\n    descriptor = Object.getOwnPropertyDescriptor(instance, name)\n  } else {\n    // falling back to prototype\n    let prototype = Object.getPrototypeOf(instance)\n    descriptor = Object.getOwnPropertyDescriptor(prototype, name)\n  }\n\n  return !!descriptor.set || (descriptor.writable === true)\n}\n\n\n// checks for property in instance or its prototype\nfunction writablePropNames(instance) {\n  let prototype = Object.getPrototypeOf(instance)\n  let propNames = _.chain(Object.getOwnPropertyNames(instance))\n    .concat(Object.getOwnPropertyNames(prototype))\n    .uniq()\n    .value()\n    .sort()\n\n  return _.filter(propNames, (name) => writableProp(instance, name))\n}\n\n\n// can't export default and import named destructuring. So we're exporting named (non-default).\n// https://github.com/babel/babel-loader/issues/194\nexport {\n  defineInternalProp,\n  writableProp,\n  writablePropNames\n}\n","// @see https://github.com/Vincit/objection.js/blob/2f7dd232aec1b1b3d880d10e75b169af2554ea91/lib/utils/mixin.js\nimport _ from '@caiena/lodash-ext'\n\n\nfunction mixin(Class, mixins) {\n  return mixins.reduce((MixedClass, Mixin) => Mixin(MixedClass), Class)\n}\n\n\nexport default mixin\n","import _                      from '@caiena/lodash-ext'\nimport Enum                   from '@caiena/enum'\nimport mixin                  from '../mixin'\nimport { defineInternalProp, writablePropNames } from '../meta'\n\n\n\nfunction defineAttr(obj, attrName, { get = null, set = null } = {}) {\n  if (!get) {\n    get = function get() {\n      return this.$attrs[attrName]\n    }\n  }\n\n  if (!set) {\n    set = function set(value) {\n      return this.$attrs[attrName] = value\n    }\n  }\n\n  Object.defineProperty(obj, attrName, {\n    get,\n    set,\n    configurable: true,\n    enumerable:   true\n  })\n}\n\nfunction defineEnum(obj, enumName, { get = null, set = null } = {}) {\n  // custom setter for enums\n  if (!set) {\n    set = function set(value) {\n      // ensures setting the key as attr value\n      let key = this.constructor.$enums[enumName].key(value)\n      return this.$attrs[enumName] = key\n    }\n  }\n\n  defineAttr(obj, enumName, { get, set })\n}\n\n\n\nfunction Attributable(Class) {\n\n  class AttributableClass extends Class {\n\n    // lazy evaluated $enums, using @caiena/enum\n    static get $enums() {\n      // avoiding static property inheritance\n      // @see http://thecodebarbarian.com/static-properties-in-javascript-with-inheritance.html\n      if (!this.hasOwnProperty('$$enums')) {\n        this.$$enums = _.reduce(this.enums, (result, enumeration, enumName) => {\n          if (enumeration instanceof Enum) {\n            result[enumName] = enumeration\n          } else {\n            result[enumName] = new Enum(enumeration)\n          }\n\n          return result\n        }, {})\n      }\n\n      return this.$$enums\n    }\n\n    // lazy evaluated $attrs\n    // for now we're only keeping the API consistent, adding a '$methodName' getter\n    // TODO: define types and create \"intelligent\" setters? (with constraints)\n    static get $attrs() {\n      // avoiding static property inheritance\n      // @see http://thecodebarbarian.com/static-properties-in-javascript-with-inheritance.html\n      if (!this.hasOwnProperty('$$attrs')) {\n        this.$$attrs = _.clone(this.attrs)\n      }\n\n      return this.$$attrs\n    }\n\n    constructor(...args) {\n      super(...args)\n\n      let klass = this.constructor\n\n      defineInternalProp(this, '$$attrs', {})\n\n      // handling enums first then attrs, avoiding overrides\n      // defining enums get/set properties\n      _.each(klass.$enums, (enumeration, enumName) => {\n        // sanity check!\n        // enum must be defined in attrs list as well\n        if (!_.includes(klass.attrs, enumName)) {\n          throw new Error(`enum \"${enumName}\" is not listed as an attribute in model ${klass.name}`)\n        }\n\n        if (!_.has(this, enumName)) {\n          // first, check if it is defined in prototype\n          if (_.hasIn(this, enumName)) {\n            let _proto = Object.getPrototypeOf(this)\n            let _descr = Object.getOwnPropertyDescriptor(_proto, enumName)\n            defineEnum(this, enumName, { get: _descr.get, set: _descr.set })\n          } else {\n            defineEnum(this, enumName)\n          }\n        }\n      })\n\n      // defining attrs get/set properties\n      _.each(klass.$attrs, (attrName) => {\n        if (!_.has(this, attrName)) {\n          // first, check if it is defined in prototype\n          if (_.hasIn(this, attrName)) {\n            let _proto = Object.getPrototypeOf(this)\n            let _descr = Object.getOwnPropertyDescriptor(_proto, attrName)\n            defineAttr(this, attrName, { get: _descr.get, set: _descr.set })\n          } else {\n            defineAttr(this, attrName)\n          }\n        }\n      })\n    }\n\n    get $attrs() {\n      // XXX: $attrs and $$attrs will be confusing...\n      return this.$$attrs\n    }\n\n    set $attrs(attrs) {\n      // TODO: remove old code\n      // return _.merge(this.$$attrs, attrs)\n\n      // set props, one-by-one, using setter method\n      let sanitizedAttrs = _.pick(attrs, this.constructor.$attrs)\n      _.each(sanitizedAttrs, (value, name) => {\n        this[name] = value\n      })\n    }\n\n    // TODO: remove it?\n    get $props() {\n      let instance = this\n      let proto = Object.getPrototypeOf(this)\n      let propNames = _.chain(Object.getOwnPropertyNames(proto))\n        .concat(Object.getOwnPropertyNames(instance))\n        .filter((name) => !(_.includes(['constructor'], name) || _.startsWith(name, '$')))\n        .uniq()\n        .value()\n        .sort()\n\n      return _.reduce(propNames, (props, propName) => {\n        props[propName] = this[propName]\n        return props\n      }, {})\n    }\n\n    $blank(attrNameOrPath) {\n      return _.blank(this.$get(attrNameOrPath))\n    }\n\n    $enumValue(enumName) {\n      return this.constructor.$enums[enumName].value(this[enumName])\n    }\n\n    $get(attrNameOrPath) {\n      return _.get(this, attrNameOrPath)\n    }\n\n    $has(attrNameOrPath) {\n      // TODO: should it be _.hasIn(), to include inherited properties?\n      return _.has(this, attrNameOrPath)\n    }\n\n    $pick(...attrNamesOrPathes) {\n      return _.pick(this, ...attrNamesOrPathes)\n    }\n\n    $present(attrNameOrPath) {\n      return _.present(this.$get(attrNameOrPath))\n    }\n\n    $set(attrNameOrPath, value) {\n      return _.set(this, attrNameOrPath, value)\n    }\n  }\n\n  return AttributableClass\n}\n\n\nexport default Attributable\n","import _                      from '@caiena/lodash-ext'\nimport mixin                  from '../mixin'\nimport { defineInternalProp, writablePropNames } from '../meta'\n\n\n\nfunction belongsTo(instance, relationName, config, { get = null, set = null } = {}) {\n  if (!get) {\n    get = function get() {\n      return this.$relations[relationName]\n    }\n  }\n\n  if (!set) {\n    // providing a way to lazily evaluate related model class\n    let ModelClass = null\n\n    if (config.model.$$model) { // check if is a model class without circular dependency\n      ModelClass = config.model\n    } else if (typeof config.model === 'string') { // use lookup\n      ModelClass = instance.constructor.$lookupModel(config.model)\n    } else if (typeof config.model === 'function') { // check if is a callable (function)\n      ModelClass = config.model()\n    } else {\n      ModelClass = config.model // default: assign it as a model class\n    }\n\n    set = function set(value) {\n      if (value == null) { // null or undefined\n        return this.$relations[relationName] = value\n      }\n\n      if (_.isArray(value)) throw new Error(\"can't assign an array to a belongsTo relation\")\n\n      // TODO: should we assign values to fks? `${relation}_id``\n\n      if (value instanceof ModelClass) {\n        return this.$relations[relationName] = value\n      } else {\n        // construct model instance with value as attributes\n        return this.$relations[relationName] = new ModelClass(value)\n      }\n    }\n  }\n\n  Object.defineProperty(instance, relationName, {\n    get,\n    set,\n    configurable: true,\n    enumerable:   true\n  })\n}\n\n\nfunction hasOne(instance, relationName, config, { get = null, set = null } = {}) {\n  if (!get) {\n    get = function get() {\n      return this.$relations[relationName]\n    }\n  }\n\n  if (!set) {\n    // providing a way to lazily evaluate related model class\n    let ModelClass = null\n\n    if (config.model.$$model) { // check if is a model class without circular dependency\n      ModelClass = config.model\n    } else if (typeof config.model === 'string') { // use lookup\n      ModelClass = instance.constructor.$lookupModel(config.model)\n    } else if (typeof config.model === 'function') { // check if is a callable (function)\n      ModelClass = config.model()\n    } else {\n      ModelClass = config.model // default: assign it as a model class\n    }\n\n    set = function set(value) {\n      if (value == null) { // null or undefined\n        return this.$relations[relationName] = value\n      }\n\n      if (_.isArray(value)) throw new Error(\"can't assign an array to a hasOne relation\")\n\n      if (value instanceof ModelClass) {\n        return this.$relations[relationName] = value\n      } else {\n        // construct model instance with value as attributes\n        return this.$relations[relationName] = new ModelClass(value)\n      }\n    }\n  }\n\n  Object.defineProperty(instance, relationName, {\n    get,\n    set,\n    configurable: true,\n    enumerable:   true\n  })\n}\n\n\nfunction hasMany(instance, relationName, config, { get = null, set = null } = {}) {\n  if (!get) {\n    get = function get() {\n      return this.$relations[relationName]\n    }\n  }\n\n  if (!set) {\n    // providing a way to lazily evaluate related model class\n    let ModelClass = null\n\n    if (config.model.$$model) { // check if is a model class without circular dependency\n      ModelClass = config.model\n    } else if (typeof config.model === 'string') { // use lookup\n      ModelClass = instance.constructor.$lookupModel(config.model)\n    } else if (typeof config.model === 'function') { // check if is a callable (function)\n      ModelClass = config.model()\n    } else {\n      ModelClass = config.model // default: assign it as a model class\n    }\n\n    set = function set(values) {\n      if (values == null) { // null or undefined\n        return this.$relations[relationName] = []\n      }\n\n      if (!_.isArray(values)) throw new Error(\"can't assign a non-array value to a hasMany relation\")\n\n      // TODO: should we assign values to fks? `${relation}_id`\n\n      let modelInstances = _.map(values, (value) => {\n        return value instanceof ModelClass ? value : new ModelClass(value)\n      })\n\n      return this.$relations[relationName] = modelInstances\n    }\n  }\n\n  Object.defineProperty(instance, relationName, {\n    get,\n    set,\n    configurable: true,\n    enumerable:   true\n  })\n}\n\n\nfunction defineRelation(instance, relationName, config, { get, set } = {}) {\n  switch (config.type) {\n    case 'belongsTo': return belongsTo(...arguments)\n    case 'hasMany':   return hasMany(...arguments)\n    case 'hasOne':    return hasOne(...arguments)\n    default: {\n      throw new Error(`Unknown relation type \"${type}\"`)\n    }\n  }\n}\n\n\n\nfunction Relatable(Class) {\n\n  class RelatableClass extends Class {\n\n    // lazy evaluated $relations\n    static get $relations() {\n      // avoiding static property inheritance\n      // @see http://thecodebarbarian.com/static-properties-in-javascript-with-inheritance.html\n      if (!this.hasOwnProperty('$$relations')) {\n        this.$$relations = this.$$relations || _.reduce(this.relations, (result, config, name) => {\n          result[name] = config\n          return result\n        }, {})\n      }\n\n      return this.$$relations\n    }\n\n\n    constructor(...args) {\n      super(...args)\n\n      let klass = this.constructor\n\n      defineInternalProp(this, '$$relations', {})\n\n      // defining relations get/set properties\n      _.each(klass.relations, (config, relationName) => {\n        if (!_.has(this, relationName)) {\n          // first, check if it is defined in prototype\n          if (_.hasIn(this, relationName)) {\n            let _proto = Object.getPrototypeOf(this)\n            let _descr = Object.getOwnPropertyDescriptor(_proto, relationName)\n            defineRelation(this, relationName, config, { get: _descr.get, set: _descr.set })\n          } else {\n            defineRelation(this, relationName, config)\n          }\n        }\n      })\n    }\n\n    get $relations() {\n      // XXX: $relations and $$relations will be confusing...\n      return this.$$relations\n    }\n  }\n\n  return RelatableClass\n}\n\n\nexport default Relatable\n","import _        from '@caiena/lodash-ext'\nimport { i18n } from '@caiena/i18n'\n\n\nfunction Translatable(Class) {\n  class TranslatableClass extends Class {\n    static get i18nScope() {\n      return `models.${_.underscore(this.name)}`\n    }\n\n    static $tModelName({ count = 1 } = {}) {\n      return i18n.t(this.i18nScope, { count })\n    }\n\n    static $tAttr(attrName, options = {}) {\n      let scope = `${this.i18nScope}.attributes`\n      return i18n.t(attrName, _.defaults({}, options, { scope }))\n    }\n\n    static $tEnum(enumName, enumValue = undefined, options = {}) {\n      let scope = this.i18nScope\n      let key = null\n\n      if (enumValue === undefined) {\n        // .attributes.${enumName}\n        scope += '.attributes'\n        key = enumName\n      } else {\n        // .enums.${enumName}.${enumValue}\n        scope += `.enums.${enumName}`\n        key = enumValue\n      }\n\n      return i18n.t(key, _.defaults({}, options, { scope }))\n    }\n\n    // TODO: localize attribute\n    // $l(attrName) {\n    //  // checkout type definition for date or datetime\n    //  // use $l('date', attrName)\n    //  // or  $l('time', attrName)\n    // }\n  }\n\n  return TranslatableClass\n}\n\n\nexport default Translatable\n","// @see https://validatejs.org/#validators-datetime\n// We're addming moment\n\nimport validate from 'validate.js'\nimport _        from '@caiena/lodash-ext'\nimport moment   from 'moment'\n\n\n// Before using it we must add the parse and format functions\n// Here is a sample implementation using moment.js\nvalidate.extend(validate.validators.datetime, {\n  // The value is guaranteed not to be null or undefined but otherwise it\n  // could be anything.\n  parse(value, options) {\n    // return +moment.utc(value)\n    return moment.utc(value)\n  },\n  // Input is a unix timestamp\n  format(value, options) {\n    var format = options.dateOnly ? 'YYYY-MM-DD' : 'YYYY-MM-DD hh:mm:ss'\n    return moment.utc(value).format(format)\n  }\n})\n\n\nexport default validate.validators.datetime\n","import validate from 'validate.js'\nimport _        from '@caiena/lodash-ext'\n\n// XXX overwriting presence validator.\n//\nfunction presence(value, options, key, attrs) {\n  let opts = _.merge({}, this.options, options)\n\n  if (_.blank(value)) {\n    return opts.message || this.message || \"can't be blank\";\n  }\n\n  // returning nothing means \"is valid\"\n}\n\nvalidate.validators.presence = presence\n\nexport default presence\n","// register all custom validators\nimport './datetime'\nimport './presence'\n\n\nexport default {}\n","import _        from '@caiena/lodash-ext'\nimport { i18n } from '@caiena/i18n'\nimport { defineInternalProp } from '../meta'\nimport validate from 'validate.js'\nimport '../validators/register'\n\n\n// custom error formatter, creating a code/values interpolation scheme with i18n\n// @see http://validatejs.org/#validate-error-formatting\nfunction transformErrors(i18nScope, errors) {\n  // errors sample:\n  // // => [\n  //   {\n  //     \"attribute\": \"username\",\n  //     \"value\": \"nicklas\",\n  //     \"validator\": \"exclusion\",\n  //     \"globalOptions\": {\n  //       \"format\": \"detailed\"\n  //     },\n  //     \"attributes\": {\n  //       \"username\": \"nicklas\",\n  //       \"password\": \"bad\"\n  //     },\n  //     \"options\": {\n  //       \"within\": [\n  //         \"nicklas\"\n  //       ],\n  //       \"message\": \"'%{value}' is not allowed\"\n  //     },\n  //     \"error\": \"Username 'nicklas' is not allowed\"\n  //   },\n  //   {\n  //     \"attribute\": \"password\",\n  //     \"value\": \"bad\",\n  //     \"validator\": \"length\",\n  //     \"globalOptions\": {\n  //       \"format\": \"detailed\"\n  //     },\n  //     \"attributes\": {\n  //       \"username\": \"nicklas\",\n  //       \"password\": \"bad\"\n  //     },\n  //     \"options\": {\n  //       \"minimum\": 6,\n  //       \"message\": \"must be at least 6 characters\"\n  //     },\n  //     \"error\": \"Password must be at least 6 characters\"\n  //   }\n  // ]\n  errors = validate.groupErrorsByAttribute(errors)\n  let transformedErrors = {}\n\n  for (let attr in errors) {\n    transformedErrors[attr] = []\n\n    for (let error of errors[attr]) {\n      let code = error.validator\n      let message = _.get(error, 'options.message') ||\n        i18n.t(`errors.${code}`, {\n          scope: i18nScope,\n          defaultValue: i18n.t(`errors.${code}`),\n          value: error.value\n        })\n\n      transformedErrors[attr].push({\n        attribute: error.attribute,\n        value: error.value,\n        code,\n        message\n      })\n    }\n  }\n\n  return transformedErrors\n}\n\n\nfunction Validatable(Class) {\n\n  class ValidatableClass extends Class {\n\n    constructor(...args) {\n      super(...args)\n      defineInternalProp(this, '$$errors', {})\n    }\n\n    get $errors() {\n      return this.$$errors\n    }\n\n    async $validate() {\n      let constraints = this.constructor.constraints\n      let instance = this\n\n      // adapting api to .then(success, error) to .then(success).catch(error)\n      return new Promise((resolve, reject) => {\n        // - cleanAttributes: false - to tell validatejs not to delete empty or without constraint attributes\n        // @see https://validatejs.org/#validate-async\n        //   > Besides accepting all options as the non async validation function it also accepts\n        //   > two additional options; cleanAttributes which, unless false, makes validate.async\n        //   > call validate.cleanAttributes before resolving the promise (...)\n        // @see https://validatejs.org/#utilities-clean-attributes\n        validate.async(this, constraints, { format: 'detailed', cleanAttributes: false })\n          .then(\n            function success(attributes) {\n              // reset errors\n              instance.$$errors = {}\n              resolve(true)\n            },\n\n            function error(errors) {\n              if (errors instanceof Error) {\n                // runtime Error. Just throw it\n                // reset errors\n                instance.$$errors = {}\n                reject(errors)\n              } else {\n                // validation error.\n                // assign to $errors\n                instance.$$errors = transformErrors(instance.constructor.i18nScope, errors)\n                resolve(false)\n              }\n            })\n      })\n    }\n  }\n\n  return ValidatableClass\n}\n\n\nexport default Validatable\n","import _                     from '@caiena/lodash-ext'\nimport { writablePropNames } from './meta'\nimport mixin                 from './mixin'\nimport Attributable          from './mixins/attributable'\nimport Relatable             from './mixins/relatable'\nimport Translatable          from './mixins/translatable'\nimport Validatable           from './mixins/validatable'\n\n\nclass Base {\n  static get attrs()     { return [] }\n  static get enums()     { return {} }\n  static get virtuals()  { return [] }\n\n  static $lookupModel(name) {\n    throw new Error('Model.$lookupModel(name) is not implemented.')\n  }\n}\n\nclass Model extends mixin(Base, [Attributable, Relatable, Translatable, Validatable]) {\n  static get $$model() { return true } // allow programmatically checking if it's a model class\n\n  // using \"props\" as name to make it explicit that we'll set any enumerable \"property\" in the instance\n  // (JavaScript land - getOwnPropertyDescriptor() and prototype)\n  constructor(props = {}, { undefs = true } = {}) {\n    super()\n\n    this.$beforeInit(...arguments) // hook for user land\n\n    let propNames = writablePropNames(this)\n    let sanitizedProps = _.pick(props, propNames)\n\n    if (undefs) {\n      // start all props with undefined, allowing them to be observed (rxjs, Vue, ...)\n      let undefProps = _.reduce(propNames, (undefProps, name) => {\n        undefProps[name] = undefined\n        return undefProps\n      }, {})\n\n      // adding undefs if not defined yet\n      // _.defaults(sanitizedProps, undefProps)\n      // XXX: using _.merge() here to keep properties names sorted\n      sanitizedProps = _.merge(undefProps, sanitizedProps)\n    }\n\n    // set props, one-by-one, using setter method\n    _.each(sanitizedProps, (value, name) => {\n      this[name] = value\n    })\n\n    this.$afterInit() // hook for user land\n  }\n\n  $beforeInit(...args) {\n    // override it in subclasses\n  }\n\n  $afterInit() {\n    // override it in subclasses\n  }\n\n  toJSON({ pick = [], include = [], omit = [], virtuals = false, relations = false, undefs = false } = {}) {\n    let json = _.clone(this.$attrs)\n\n    if (!undefs) {\n      json = _.pickBy(json, (val, key) => !_.isUndefined(val))\n    }\n\n    if (virtuals) {\n      _.merge(json, _.pick(this, this.constructor.virtuals))\n    }\n\n    if (relations) { // TODO: test it\n      _.merge(json, _.pick(this, this.constructor.$relations))\n    }\n\n    if (_.present(pick)) {\n      json = _.pick(json, pick)\n    }\n\n    if (_.present(include)) {  // TODO: test it\n      json = _.merge(json, _.pick(this, include))\n    }\n\n    if (_.present(omit)) {\n      json = _.omit(json, omit)\n    }\n\n    return json\n  }\n\n  $serialize(...args) {\n    return this.toJSON(...args)\n  }\n}\n\n\nexport default Model\n","import _ from '@caiena/lodash-ext'\nimport * as contents from './*.yml'\n\nconst translations = {}\n\n_.each(contents, (content, _id) => {\n  _.merge(translations, content)\n})\n\n\nexport default translations\n"],"names":["defineInternalProp","obj","prop","value","Object","defineProperty","enumerable","writable","configurable","writableProp","instance","name","_","includes","startsWith","descriptor","hasOwnProperty","getOwnPropertyDescriptor","prototype","getPrototypeOf","set","writablePropNames","propNames","chain","getOwnPropertyNames","concat","uniq","sort","filter","mixin","Class","mixins","reduce","MixedClass","Mixin","defineAttr","attrName","get","$attrs","defineEnum","enumName","key","constructor","$enums","Attributable","AttributableClass","$$enums","enums","result","enumeration","Enum","$$attrs","clone","attrs","args","klass","each","Error","has","hasIn","_proto","_descr","attrNameOrPath","blank","$get","attrNamesOrPathes","pick","present","sanitizedAttrs","proto","props","propName","belongsTo","relationName","config","$relations","ModelClass","model","$$model","$lookupModel","isArray","hasOne","hasMany","values","modelInstances","map","defineRelation","type","arguments","Relatable","RelatableClass","$$relations","relations","Translatable","TranslatableClass","count","i18n","t","i18nScope","options","scope","defaults","enumValue","undefined","underscore","validate","extend","validators","datetime","parse","moment","utc","format","dateOnly","presence","opts","merge","message","transformErrors","errors","groupErrorsByAttribute","transformedErrors","attr","error","code","validator","defaultValue","push","attribute","Validatable","ValidatableClass","constraints","Promise","resolve","reject","async","cleanAttributes","then","success","attributes","$$errors","Base","Model","undefs","$beforeInit","sanitizedProps","undefProps","$afterInit","include","omit","virtuals","json","pickBy","val","isUndefined","toJSON","translations","contents","content","_id"],"mappings":"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"}